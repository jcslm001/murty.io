# General settings

DirectoryIndex index.php
AddDefaultCharset UTF-8
Options -Indexes

<IfModule mod_rewrite.c>
RewriteEngine on

# Allow for Angular 1.6 HTML5 state links
# - Markdown and API requests aren't affected
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule .*[^\.md]$ index.php [L]

# Redirect all HTTP requests to HTTPS
#RewriteCond %{HTTPS} !on
#RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</IfModule>

# Customise error pages

ErrorDocument 403 /index.php
ErrorDocument 404 /index.php
ErrorDocument 500 /index.php

# Customise access to files

<Files ~ "robots.txt">
order allow,deny
allow from all
</Files>

<Files ~ "^\.htaccess">
order allow,deny
deny from all
</Files>

<Files "sitemap.xml">
order allow,deny
allow from all
</Files>

# Setup gzip compression

<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/css application/x-javascript application/javascript
AddOutputFilter DEFLATE md
</IfModule>

# Customise caching rules

<IfModule mod_expires.c>
ExpiresActive on
ExpiresDefault "access plus 1 year"
</IfModule>
